"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[58],{58:(e,t,l)=>{l.r(t),l.d(t,{default:()=>k});var n=l(821),o={class:"mb-3"},a=(0,n.createElementVNode)("label",{class:"form-label"},"Заголовок",-1),i=["disabled"],c={class:"mb-3"},d=(0,n.createElementVNode)("label",{class:"form-label"},"Основной текст",-1),s=["disabled"],r={class:"mb-3"},m=(0,n.createElementVNode)("label",{class:"form-label"},"Изображения",-1),u=["disabled"];var p=l(243),g=l(366),f=l(980),v=l.n(f);const h={setup:function(e){var t,l=null==e||null===(t=e.data)||void 0===t?void 0:t.content;return{content:{title:null==l?void 0:l.title,description:null==l?void 0:l.description}}},props:{disabled:{type:Boolean},data:{type:Object}},emits:["update","refreshPreview"],components:{LimitsFile:p.Z,ImageCollection:g.Z,Draggable:v()},data:function(){return{files:[],media:[],newImages:[]}},methods:{selectImages:function(e){this.newImages=e.target.files}}};const k=(0,l(744).Z)(h,[["render",function(e,t,l,p,g,f){var v,h,k=(0,n.resolveComponent)("limits-file"),b=(0,n.resolveComponent)("image-collection");return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createElementVNode)("div",o,[a,(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",class:"form-control",name:"content[title]","onUpdate:modelValue":t[0]||(t[0]=function(e){return p.content.title=e}),disabled:l.disabled},null,8,i),[[n.vModelText,p.content.title]])]),(0,n.createElementVNode)("div",c,[d,(0,n.withDirectives)((0,n.createElementVNode)("textarea",{class:"form-control",rows:"3",name:"content[description]","onUpdate:modelValue":t[1]||(t[1]=function(e){return p.content.description=e}),disabled:l.disabled},null,8,s),[[n.vModelText,p.content.description]])]),(0,n.createElementVNode)("div",r,[m,(0,n.createElementVNode)("input",{class:"form-control",type:"file",accept:"image/jpeg,image/pjpeg,image/png",name:"files[sliders][]",multiple:"",disabled:l.disabled,onChange:t[2]||(t[2]=function(){return f.selectImages&&f.selectImages.apply(f,arguments)})},null,40,u),(0,n.createVNode)(k,{format:"jpg, png",minResolution:"798x528",multiple:""})]),(0,n.createVNode)(b,{images:null===(v=l.data)||void 0===v||null===(h=v.images)||void 0===h?void 0:h.sliders,newImages:g.newImages},null,8,["images","newImages"])])}]])},366:(e,t,l)=>{l.d(t,{Z:()=>E});var n=l(821),o={key:0},a={class:"col-sm-3 mb-3"},i={key:0},c=["src"],d={key:0,class:"card-body"},s={class:"card-footer"},r={class:"form-check"},m=["value","id","checked","onClick"],u=["for"],p={key:1},g=["src"],f={class:"card-footer"},v={class:"form-check"},h=["value","id","checked","onClick"],k=["for"],b=["value"];var V=l(980);const N={props:{images:{type:Array},newImages:{type:Object}},components:{Draggable:l.n(V)()},data:function(){return{collection:[],skipedImages:[],deletedImages:[]}},methods:{toggleDeletedMedia:function(e){var t=this.deletedImages.indexOf(e);-1!=t?this.deletedImages.splice(t,1):this.deletedImages.push(e)},toggleSkipedMedia:function(e){var t=this.skipedImages.indexOf(e);-1!=t?this.skipedImages.splice(t,1):this.skipedImages.push(e)},loadImages:function(){var e=this;null!=this&&this.images&&null!=this&&this.images.length&&(null==this||this.images.forEach((function(t){e.collection.push(t)})))}},computed:{positions:function(){var e=this,t=[];return this.collection.forEach((function(l,n){var o=e.collection[n-1],a=null!=l&&l.name?null==l?void 0:l.name:null==l?void 0:l.media.id,i=null;0!=n&&null!=o&&o.name?i=null==o?void 0:o.name:0!=n&&(i=null==o?void 0:o.media.id),t.push({id:a,prevId:i})}),[]),JSON.stringify(t)}},beforeMount:function(){this.loadImages()},watch:{newImages:function(e){var t=this;this.collection=[],this.loadImages(),Object.entries(e).forEach((function(e){var l=new FileReader;l.readAsDataURL(e[1]),l.onload=function(l){var n;t.collection.push({name:null===(n=e[1])||void 0===n?void 0:n.name,url:l.target.result,index:t.collection.length})}}))}}};const E=(0,l(744).Z)(N,[["render",function(e,t,l,V,N,E){var y=(0,n.resolveComponent)("draggable");return N.collection.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",o,[(0,n.createVNode)(y,{modelValue:N.collection,"onUpdate:modelValue":t[0]||(t[0]=function(e){return N.collection=e}),"item-key":"index",class:"row"},{item:(0,n.withCtx)((function(t){var l,o,b,V=t.element;return[(0,n.createElementVNode)("div",a,[(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["card",{"border-warning":!(null!=V&&null!==(l=V.media)&&void 0!==l&&l.id)}])},[null!=V&&null!==(o=V.media)&&void 0!==o&&o.id?((0,n.openBlock)(),(0,n.createElementBlock)("div",i,[(0,n.createElementVNode)("img",{src:V.urls.thumb,alt:""},null,8,c),null!==(b=e.$slots)&&void 0!==b&&b.body?((0,n.openBlock)(),(0,n.createElementBlock)("div",d,[(0,n.renderSlot)(e.$slots,"body",{media:null==V?void 0:V.media})])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",s,[(0,n.createElementVNode)("div",r,[(0,n.createElementVNode)("input",{class:"form-check-input",name:"delete_media[]",value:V.media.id,id:"image".concat(V.media.id),type:"checkbox",checked:-1!=N.deletedImages.indexOf(V.media.id),onClick:function(e){return E.toggleDeletedMedia(V.media.id)}},null,8,m),(0,n.createElementVNode)("label",{class:"form-check-label",for:"image".concat(V.media.id)},"Удалить",8,u)])])])):((0,n.openBlock)(),(0,n.createElementBlock)("div",p,[(0,n.createElementVNode)("img",{src:V.url,class:"img-fluid",alt:""},null,8,g),(0,n.renderSlot)(e.$slots,"body",{class:"card-body"}),(0,n.createElementVNode)("div",f,[(0,n.createElementVNode)("div",v,[(0,n.createElementVNode)("input",{class:"form-check-input",name:"skip_media[]",value:V.name,id:"new_image".concat(V.index),type:"checkbox",checked:-1!=N.skipedImages.indexOf(V.index),onClick:function(e){return E.toggleSkipedMedia(V.index)}},null,8,h),(0,n.createElementVNode)("label",{class:"form-check-label",for:"new_image".concat(V.index)},"Пропустить",8,k)])])]))],2)])]})),_:3},8,["modelValue"]),(0,n.createElementVNode)("input",{type:"hidden",name:"position_images",value:E.positions},null,8,b)])):(0,n.createCommentVNode)("",!0)}]])},243:(e,t,l)=>{l.d(t,{Z:()=>p});var n=l(821),o={class:"form-text"},a={key:0},i=(0,n.createElementVNode)("br",null,null,-1),c={key:1},d=(0,n.createElementVNode)("br",null,null,-1),s={key:2},r=(0,n.createElementVNode)("br",null,null,-1);var m=l(181);const u={props:{multiple:{type:Boolean,default:!1},minResolution:{type:String},format:{type:String}},data:function(){return{uploadMaxFilesize:"",maxFileUploads:0}},beforeMount:function(){var e=this;(0,m.Rj)().then((function(t){e.uploadMaxFilesize=t.data.upload_max_filesize_string,e.maxFileUploads=t.data.max_file_uploads}))}};const p=(0,l(744).Z)(u,[["render",function(e,t,l,m,u,p){return(0,n.openBlock)(),(0,n.createElementBlock)("div",o,[(0,n.createTextVNode)(" Максимальный размер: "+(0,n.toDisplayString)(u.uploadMaxFilesize)+" ",1),l.multiple?((0,n.openBlock)(),(0,n.createElementBlock)("span",a,[i,(0,n.createTextVNode)("Максимальное количество одновременно загружаемых файлов: "+(0,n.toDisplayString)(u.maxFileUploads),1)])):(0,n.createCommentVNode)("",!0),l.format?((0,n.openBlock)(),(0,n.createElementBlock)("span",c,[d,(0,n.createTextVNode)("Поддерживаемые форматы файлов: "+(0,n.toDisplayString)(l.format),1)])):(0,n.createCommentVNode)("",!0),l.minResolution?((0,n.openBlock)(),(0,n.createElementBlock)("span",s,[r,(0,n.createTextVNode)("Минимальное разрешение картинки: "+(0,n.toDisplayString)(l.minResolution),1)])):(0,n.createCommentVNode)("",!0)])}]])}}]);
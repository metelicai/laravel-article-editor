"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[584],{584:(e,l,t)=>{t.r(l),t.d(l,{default:()=>u});var n=t(821),a={class:"mb-3"},o=(0,n.createElementVNode)("label",{class:"form-label"},"Изображения",-1),i=["disabled"];var c=t(243),d=t(366),s=t(980),r=t.n(s);const m={props:{disabled:{type:Boolean},data:{type:Object}},emits:["update","refreshPreview"],components:{LimitsFile:c.Z,ImageCollection:d.Z,Draggable:r()},data:function(){return{newImages:[]}},methods:{selectImages:function(e){this.newImages=e.target.files}}};const u=(0,t(744).Z)(m,[["render",function(e,l,t,c,d,s){var r,m,u=(0,n.resolveComponent)("limits-file"),p=(0,n.resolveComponent)("image-collection");return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createElementVNode)("div",a,[o,(0,n.createElementVNode)("input",{class:"form-control",type:"file",accept:"image/jpeg,image/pjpeg,image/png",name:"files[gallery][]",multiple:"",disabled:t.disabled,onChange:l[0]||(l[0]=function(){return s.selectImages&&s.selectImages.apply(s,arguments)})},null,40,i),(0,n.createVNode)(u,{format:"jpg, png",minResolution:"500x250",multiple:""})]),(0,n.createVNode)(p,{images:null===(r=t.data)||void 0===r||null===(m=r.images)||void 0===m?void 0:m.gallery,newImages:d.newImages},null,8,["images","newImages"])])}]])},366:(e,l,t)=>{t.d(l,{Z:()=>N});var n=t(821),a={key:0},o={class:"col-sm-3 mb-3"},i={key:0},c=["src"],d={key:0,class:"card-body"},s={class:"card-footer"},r={class:"form-check"},m=["value","id","checked","onClick"],u=["for"],p={key:1},g=["src"],f={class:"card-footer"},h={class:"form-check"},v=["value","id","checked","onClick"],k=["for"],b=["value"];var V=t(980);const y={props:{images:{type:Array},newImages:{type:Object}},components:{Draggable:t.n(V)()},data:function(){return{collection:[],skipedImages:[],deletedImages:[]}},methods:{toggleDeletedMedia:function(e){var l=this.deletedImages.indexOf(e);-1!=l?this.deletedImages.splice(l,1):this.deletedImages.push(e)},toggleSkipedMedia:function(e){var l=this.skipedImages.indexOf(e);-1!=l?this.skipedImages.splice(l,1):this.skipedImages.push(e)},loadImages:function(){var e=this;null!=this&&this.images&&null!=this&&this.images.length&&(null==this||this.images.forEach((function(l){e.collection.push(l)})))}},computed:{positions:function(){var e=this,l=[];return this.collection.forEach((function(t,n){var a=e.collection[n-1],o=null!=t&&t.name?null==t?void 0:t.name:null==t?void 0:t.media.id,i=null;0!=n&&null!=a&&a.name?i=null==a?void 0:a.name:0!=n&&(i=null==a?void 0:a.media.id),l.push({id:o,prevId:i})}),[]),JSON.stringify(l)}},beforeMount:function(){this.loadImages()},watch:{newImages:function(e){var l=this;this.collection=[],this.loadImages(),Object.entries(e).forEach((function(e){var t=new FileReader;t.readAsDataURL(e[1]),t.onload=function(t){var n;l.collection.push({name:null===(n=e[1])||void 0===n?void 0:n.name,url:t.target.result,index:l.collection.length})}}))}}};const N=(0,t(744).Z)(y,[["render",function(e,l,t,V,y,N){var E=(0,n.resolveComponent)("draggable");return y.collection.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",a,[(0,n.createVNode)(E,{modelValue:y.collection,"onUpdate:modelValue":l[0]||(l[0]=function(e){return y.collection=e}),"item-key":"index",class:"row"},{item:(0,n.withCtx)((function(l){var t,a,b,V=l.element;return[(0,n.createElementVNode)("div",o,[(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["card",{"border-warning":!(null!=V&&null!==(t=V.media)&&void 0!==t&&t.id)}])},[null!=V&&null!==(a=V.media)&&void 0!==a&&a.id?((0,n.openBlock)(),(0,n.createElementBlock)("div",i,[(0,n.createElementVNode)("img",{src:V.urls.thumb,alt:""},null,8,c),null!==(b=e.$slots)&&void 0!==b&&b.body?((0,n.openBlock)(),(0,n.createElementBlock)("div",d,[(0,n.renderSlot)(e.$slots,"body",{media:null==V?void 0:V.media})])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",s,[(0,n.createElementVNode)("div",r,[(0,n.createElementVNode)("input",{class:"form-check-input",name:"delete_media[]",value:V.media.id,id:"image".concat(V.media.id),type:"checkbox",checked:-1!=y.deletedImages.indexOf(V.media.id),onClick:function(e){return N.toggleDeletedMedia(V.media.id)}},null,8,m),(0,n.createElementVNode)("label",{class:"form-check-label",for:"image".concat(V.media.id)},"Удалить",8,u)])])])):((0,n.openBlock)(),(0,n.createElementBlock)("div",p,[(0,n.createElementVNode)("img",{src:V.url,class:"img-fluid",alt:""},null,8,g),(0,n.renderSlot)(e.$slots,"body",{class:"card-body"}),(0,n.createElementVNode)("div",f,[(0,n.createElementVNode)("div",h,[(0,n.createElementVNode)("input",{class:"form-check-input",name:"skip_media[]",value:V.name,id:"new_image".concat(V.index),type:"checkbox",checked:-1!=y.skipedImages.indexOf(V.index),onClick:function(e){return N.toggleSkipedMedia(V.index)}},null,8,v),(0,n.createElementVNode)("label",{class:"form-check-label",for:"new_image".concat(V.index)},"Пропустить",8,k)])])]))],2)])]})),_:3},8,["modelValue"]),(0,n.createElementVNode)("input",{type:"hidden",name:"position_images",value:N.positions},null,8,b)])):(0,n.createCommentVNode)("",!0)}]])},243:(e,l,t)=>{t.d(l,{Z:()=>p});var n=t(821),a={class:"form-text"},o={key:0},i=(0,n.createElementVNode)("br",null,null,-1),c={key:1},d=(0,n.createElementVNode)("br",null,null,-1),s={key:2},r=(0,n.createElementVNode)("br",null,null,-1);var m=t(181);const u={props:{multiple:{type:Boolean,default:!1},minResolution:{type:String},format:{type:String}},data:function(){return{uploadMaxFilesize:"",maxFileUploads:0}},beforeMount:function(){var e=this;(0,m.Rj)().then((function(l){e.uploadMaxFilesize=l.data.upload_max_filesize_string,e.maxFileUploads=l.data.max_file_uploads}))}};const p=(0,t(744).Z)(u,[["render",function(e,l,t,m,u,p){return(0,n.openBlock)(),(0,n.createElementBlock)("div",a,[(0,n.createTextVNode)(" Максимальный размер: "+(0,n.toDisplayString)(u.uploadMaxFilesize)+" ",1),t.multiple?((0,n.openBlock)(),(0,n.createElementBlock)("span",o,[i,(0,n.createTextVNode)("Максимальное количество одновременно загружаемых файлов: "+(0,n.toDisplayString)(u.maxFileUploads),1)])):(0,n.createCommentVNode)("",!0),t.format?((0,n.openBlock)(),(0,n.createElementBlock)("span",c,[d,(0,n.createTextVNode)("Поддерживаемые форматы файлов: "+(0,n.toDisplayString)(t.format),1)])):(0,n.createCommentVNode)("",!0),t.minResolution?((0,n.openBlock)(),(0,n.createElementBlock)("span",s,[r,(0,n.createTextVNode)("Минимальное разрешение картинки: "+(0,n.toDisplayString)(t.minResolution),1)])):(0,n.createCommentVNode)("",!0)])}]])}}]);
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[573],{573:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var l=n(821),o={class:"mb-3"},a=(0,l.createElementVNode)("label",{class:"form-label"},"Заголовок",-1),i=["disabled"],d={class:"mb-3"},c=(0,l.createElementVNode)("label",{class:"form-label"},"Описание",-1),s=["disabled"],r={class:"mb-3"},m=(0,l.createElementVNode)("label",{class:"form-label"},"Надпись на кнопке",-1),u=["disabled"],p=(0,l.createElementVNode)("div",{class:"form-text"},"Кнопка будет отображаться только если заполнены оба поля: «Надпись на кнопке» и «Телефон для кнопки»",-1),v={class:"mb-3"},b=(0,l.createElementVNode)("label",{class:"form-label"},"Телефон для кнопки",-1),f=["disabled"],h=(0,l.createElementVNode)("div",{class:"form-text"},"Кнопка будет отображаться только если заполнены оба поля: «Надпись на кнопке» и «Телефон для кнопки»",-1),g={class:"mb-3"},V=(0,l.createElementVNode)("label",{class:"form-label"},"Идентификатор цели «Яндекс.Метрики» для клика по кнопке",-1),k=["disabled"],N=(0,l.createElementVNode)("div",{class:"form-text"},"Необходим для учёта кликов по кнопке в конверсиях «Яндекс.Метрики»",-1),E={class:"mb-3"},x=(0,l.createElementVNode)("label",{class:"form-label"},"Код для вставки видео с YouTube",-1),y=["disabled"],_=(0,l.createElementVNode)("div",{class:"form-text"},[(0,l.createTextVNode)("Код можно получить если нажать кнопку «Поделиться» под видео и выбрать вариант «Встроить»"),(0,l.createElementVNode)("br"),(0,l.createTextVNode)("Если будут добавлены изображения ниже, то видео не будет показываться")],-1),w={class:"mb-3"},I=(0,l.createElementVNode)("label",{class:"form-label"},"Изображения",-1),B=["disabled"];var C=n(243),M=n(366),D=n(980),T=n.n(D);const S={props:{disabled:{type:Boolean},data:{type:Object}},emits:["update","refreshPreview"],components:{LimitsFile:C.Z,ImageCollection:M.Z,Draggable:T()},data:function(){return{content:{title:"",description:"",button_text:"",button_phone:"",button_metrika:"",url_video:""},media:[],newImages:[]}},methods:{selectImages:function(e){this.newImages=e.target.files}},beforeMount:function(){var e,t,n,l,o,a;this.content.title=null===(e=this.data)||void 0===e?void 0:e.content.title,this.content.description=null===(t=this.data)||void 0===t?void 0:t.content.description,this.content.button_text=null===(n=this.data)||void 0===n?void 0:n.content.button_text,this.content.button_phone=null===(l=this.data)||void 0===l?void 0:l.content.button_phone,this.content.button_metrika=null===(o=this.data)||void 0===o?void 0:o.content.button_metrika,this.content.url_video=null===(a=this.data)||void 0===a?void 0:a.content.url_video}};const U=(0,n(744).Z)(S,[["render",function(e,t,n,C,M,D){var T,S,U=(0,l.resolveComponent)("limits-file"),F=(0,l.resolveComponent)("image-collection");return(0,l.openBlock)(),(0,l.createElementBlock)("div",null,[(0,l.createElementVNode)("div",o,[a,(0,l.withDirectives)((0,l.createElementVNode)("input",{type:"text",class:"form-control",name:"content[title]","onUpdate:modelValue":t[0]||(t[0]=function(e){return M.content.title=e}),disabled:n.disabled},null,8,i),[[l.vModelText,M.content.title]])]),(0,l.createElementVNode)("div",d,[c,(0,l.withDirectives)((0,l.createElementVNode)("textarea",{class:"form-control",rows:"3",name:"content[description]","onUpdate:modelValue":t[1]||(t[1]=function(e){return M.content.description=e}),disabled:n.disabled},null,8,s),[[l.vModelText,M.content.description]])]),(0,l.createElementVNode)("div",r,[m,(0,l.withDirectives)((0,l.createElementVNode)("input",{type:"text",class:"form-control",name:"content[button_text]","onUpdate:modelValue":t[2]||(t[2]=function(e){return M.content.button_text=e}),disabled:n.disabled},null,8,u),[[l.vModelText,M.content.button_text]]),p]),(0,l.createElementVNode)("div",v,[b,(0,l.withDirectives)((0,l.createElementVNode)("input",{type:"text",class:"form-control",name:"content[button_phone]","onUpdate:modelValue":t[3]||(t[3]=function(e){return M.content.button_phone=e}),disabled:n.disabled},null,8,f),[[l.vModelText,M.content.button_phone]]),h]),(0,l.createElementVNode)("div",g,[V,(0,l.withDirectives)((0,l.createElementVNode)("input",{type:"text",class:"form-control",name:"content[button_metrika]","onUpdate:modelValue":t[4]||(t[4]=function(e){return M.content.button_metrika=e}),disabled:n.disabled},null,8,k),[[l.vModelText,M.content.button_metrika]]),N]),(0,l.createElementVNode)("div",E,[x,(0,l.withDirectives)((0,l.createElementVNode)("textarea",{class:"form-control",rows:"3",name:"content[url_video]","onUpdate:modelValue":t[5]||(t[5]=function(e){return M.content.url_video=e}),disabled:n.disabled},null,8,y),[[l.vModelText,M.content.url_video]]),_]),(0,l.createElementVNode)("div",w,[I,(0,l.createElementVNode)("input",{class:"form-control",type:"file",accept:"image/jpeg,image/pjpeg,image/png",name:"files[cover][]",multiple:"",disabled:n.disabled,onChange:t[6]||(t[6]=function(){return D.selectImages&&D.selectImages.apply(D,arguments)})},null,40,B),(0,l.createVNode)(U,{format:"jpg, png",minResolution:"798x528",multiple:""})]),(0,l.createVNode)(F,{images:null===(T=n.data)||void 0===T||null===(S=T.images)||void 0===S?void 0:S.cover,newImages:M.newImages},null,8,["images","newImages"])])}]])},366:(e,t,n)=>{n.d(t,{Z:()=>E});var l=n(821),o={key:0},a={class:"col-sm-3 mb-3"},i={key:0},d=["src"],c={key:0,class:"card-body"},s={class:"card-footer"},r={class:"form-check"},m=["value","id","checked","onClick"],u=["for"],p={key:1},v=["src"],b={class:"card-footer"},f={class:"form-check"},h=["value","id","checked","onClick"],g=["for"],V=["value"];var k=n(980);const N={props:{images:{type:Array},newImages:{type:Object}},components:{Draggable:n.n(k)()},data:function(){return{collection:[],skipedImages:[],deletedImages:[]}},methods:{toggleDeletedMedia:function(e){var t=this.deletedImages.indexOf(e);-1!=t?this.deletedImages.splice(t,1):this.deletedImages.push(e)},toggleSkipedMedia:function(e){var t=this.skipedImages.indexOf(e);-1!=t?this.skipedImages.splice(t,1):this.skipedImages.push(e)},loadImages:function(){var e=this;null!=this&&this.images&&null!=this&&this.images.length&&(null==this||this.images.forEach((function(t){e.collection.push(t)})))}},computed:{positions:function(){var e=this,t=[];return this.collection.forEach((function(n,l){var o=e.collection[l-1],a=null!=n&&n.name?null==n?void 0:n.name:null==n?void 0:n.media.id,i=null;0!=l&&null!=o&&o.name?i=null==o?void 0:o.name:0!=l&&(i=null==o?void 0:o.media.id),t.push({id:a,prevId:i})}),[]),JSON.stringify(t)}},beforeMount:function(){this.loadImages()},watch:{newImages:function(e){var t=this;this.collection=[],this.loadImages(),Object.entries(e).forEach((function(e){var n=new FileReader;n.readAsDataURL(e[1]),n.onload=function(n){var l;t.collection.push({name:null===(l=e[1])||void 0===l?void 0:l.name,url:n.target.result,index:t.collection.length})}}))}}};const E=(0,n(744).Z)(N,[["render",function(e,t,n,k,N,E){var x=(0,l.resolveComponent)("draggable");return N.collection.length?((0,l.openBlock)(),(0,l.createElementBlock)("div",o,[(0,l.createVNode)(x,{modelValue:N.collection,"onUpdate:modelValue":t[0]||(t[0]=function(e){return N.collection=e}),"item-key":"index",class:"row"},{item:(0,l.withCtx)((function(t){var n,o,V,k=t.element;return[(0,l.createElementVNode)("div",a,[(0,l.createElementVNode)("div",{class:(0,l.normalizeClass)(["card",{"border-warning":!(null!=k&&null!==(n=k.media)&&void 0!==n&&n.id)}])},[null!=k&&null!==(o=k.media)&&void 0!==o&&o.id?((0,l.openBlock)(),(0,l.createElementBlock)("div",i,[(0,l.createElementVNode)("img",{src:k.urls.thumb,alt:""},null,8,d),null!==(V=e.$slots)&&void 0!==V&&V.body?((0,l.openBlock)(),(0,l.createElementBlock)("div",c,[(0,l.renderSlot)(e.$slots,"body",{media:null==k?void 0:k.media})])):(0,l.createCommentVNode)("",!0),(0,l.createElementVNode)("div",s,[(0,l.createElementVNode)("div",r,[(0,l.createElementVNode)("input",{class:"form-check-input",name:"delete_media[]",value:k.media.id,id:"image".concat(k.media.id),type:"checkbox",checked:-1!=N.deletedImages.indexOf(k.media.id),onClick:function(e){return E.toggleDeletedMedia(k.media.id)}},null,8,m),(0,l.createElementVNode)("label",{class:"form-check-label",for:"image".concat(k.media.id)},"Удалить",8,u)])])])):((0,l.openBlock)(),(0,l.createElementBlock)("div",p,[(0,l.createElementVNode)("img",{src:k.url,class:"img-fluid",alt:""},null,8,v),(0,l.renderSlot)(e.$slots,"body",{class:"card-body"}),(0,l.createElementVNode)("div",b,[(0,l.createElementVNode)("div",f,[(0,l.createElementVNode)("input",{class:"form-check-input",name:"skip_media[]",value:k.name,id:"new_image".concat(k.index),type:"checkbox",checked:-1!=N.skipedImages.indexOf(k.index),onClick:function(e){return E.toggleSkipedMedia(k.index)}},null,8,h),(0,l.createElementVNode)("label",{class:"form-check-label",for:"new_image".concat(k.index)},"Пропустить",8,g)])])]))],2)])]})),_:3},8,["modelValue"]),(0,l.createElementVNode)("input",{type:"hidden",name:"position_images",value:E.positions},null,8,V)])):(0,l.createCommentVNode)("",!0)}]])},243:(e,t,n)=>{n.d(t,{Z:()=>p});var l=n(821),o={class:"form-text"},a={key:0},i=(0,l.createElementVNode)("br",null,null,-1),d={key:1},c=(0,l.createElementVNode)("br",null,null,-1),s={key:2},r=(0,l.createElementVNode)("br",null,null,-1);var m=n(181);const u={props:{multiple:{type:Boolean,default:!1},minResolution:{type:String},format:{type:String}},data:function(){return{uploadMaxFilesize:"",maxFileUploads:0}},beforeMount:function(){var e=this;(0,m.Rj)().then((function(t){e.uploadMaxFilesize=t.data.upload_max_filesize_string,e.maxFileUploads=t.data.max_file_uploads}))}};const p=(0,n(744).Z)(u,[["render",function(e,t,n,m,u,p){return(0,l.openBlock)(),(0,l.createElementBlock)("div",o,[(0,l.createTextVNode)(" Максимальный размер: "+(0,l.toDisplayString)(u.uploadMaxFilesize)+" ",1),n.multiple?((0,l.openBlock)(),(0,l.createElementBlock)("span",a,[i,(0,l.createTextVNode)("Максимальное количество одновременно загружаемых файлов: "+(0,l.toDisplayString)(u.maxFileUploads),1)])):(0,l.createCommentVNode)("",!0),n.format?((0,l.openBlock)(),(0,l.createElementBlock)("span",d,[c,(0,l.createTextVNode)("Поддерживаемые форматы файлов: "+(0,l.toDisplayString)(n.format),1)])):(0,l.createCommentVNode)("",!0),n.minResolution?((0,l.openBlock)(),(0,l.createElementBlock)("span",s,[r,(0,l.createTextVNode)("Минимальное разрешение картинки: "+(0,l.toDisplayString)(n.minResolution),1)])):(0,l.createCommentVNode)("",!0)])}]])}}]);
## Добавление блоков

- В конфиг **admin.php** в раздел **blocks.types** добавить тип блока, по аналогии с остальными
- в папке **resources/views/site/page-blocks** создать шаблон представления для этого блока на сайте
- в папке **resources/js/admin/components/BlockComponents** создать сам блок для админки

### Конфиг admin
```php
    [
        'name' => 'Текст', // название блока, оно будет отображаться в админке
        'type' => 'article', // тип блока
    ],
```

### Файлы в папке **resources/views/site/page-blocks**

Имя файла должно соответствовать типу блока. Пример: тип блока article, файл называется article.blade.php

### Файлы в папке **resources/js/admin/components/BlockComponents**

Имя файла должно начинаться с типа блока с Большой буквы, далее идёт **Component.vue**. Пример: тип блока slider, файл называется SliderComponent.vue

### Общие нюансы добавления компонентов

В компоненте обязательно должны быть объявлены следующие prop'ы и эмиты:
```js
props: {
    isPreview: {
        type: Boolean
    },
    previewContent: {
        type: String
    },
    disabled: {
        type: Boolean
    },
    data: {
        type: Object
    }
},
emits: [
    'update',
    'refreshPreview'
],
```

При разработки Vue компонента блока для админки необходимо помнить что этот компонент будет использоваться и при создании, и при редактировании, а так же в режиме предпросмотра.

При передачи данных в API необходимо соблюдадть следующую структуру данных:
```js
{
    menu_item_id: 1, // обязательный параметр, указывает к какому пункту меню относится блок
    type: '', // тип блока. Используется только при создании блока. При обновлении игнорируется
    is_published: true, // флаг будликации блока
    content: {}, // содержимо блока. Ниже будет описано подробнее
    deleteMedia: [], // массив ключей медиа, которые необходимо удалить
    files: {}, // Список файлов для загрузки
}
```

#### Поле **content** в API блоков

Данное поле хранится в формате json, и может содержать любую, необходимую структуру данных.

#### Поле **files** в API блоков

Поле **files** содержит массивы файлов, ключи которых являются названием коллекций медиа.
Пример:
```js
files: {
    sliders: [ // Все файлы находящиеся в данном массиве будут добавлены в коллекцию sliders
        // ...
    ],
    gallery: [ // Все файлы находящиеся в данном массиве будут добавлены в коллекцию gallery
        // ...
    ]
}
```
